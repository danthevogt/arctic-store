(this.webpackJsonpnorthwestlabs=this.webpackJsonpnorthwestlabs||[]).push([[0],{120:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(35),c=a.n(l),m=(a(90),a(91),a(92),a(28)),o=a.n(m),s=a(51),i=a(36),u=a(83),d=a(19),E=a(67),p=a(68),b=a(82),h=a(84),g=a(31),f=a.n(g),v=a(46),y=r.a.createContext(),x=a(124),N=a(123),C=a(78),O=(a(16),a(129)),j=a(130),w=a(127),k=a(7);function F(){var e=Object(n.useContext)(y);return r.a.createElement(O.a,{expand:"lg"},r.a.createElement(k.b,{to:"/"},r.a.createElement(O.a.Brand,null,r.a.createElement("img",{alt:"Site Icon",src:"\\lab-logo.PNG",width:"30px"})," Arctic")),r.a.createElement(O.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(O.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(j.a,{className:"mr-auto"},r.a.createElement(k.b,{to:"/",className:"nav-link"},"Home"),r.a.createElement(k.b,{to:"/about",className:"nav-link"},"About"),r.a.createElement(k.b,{to:"/help",className:"nav-link"},"Help")),r.a.createElement(j.a,null,r.a.createElement(k.b,{to:"/cart",className:"nav-link"},r.a.createElement("i",{className:"fas fa-shopping-cart"}," (",e.cartCount,")")),r.a.createElement(w.a,{title:"Welcome, Daniel",id:"collasible-nav-dropdown"},r.a.createElement(w.a.Item,null,"My Account"),r.a.createElement(w.a.Divider,null),r.a.createElement(w.a.Item,null,"Logout")))))}var T=a(122);var S=function(e){var t=r.a.useContext(y);if(!t.categories)return r.a.createElement("div",null,"Loading...");for(var a={},n=0,l=0,c=Object.values(t.products);l<c.length;l++){var m=c[l];a[m.category.id]=(a[m.category.id]||0)+1,n+=1}return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{defaultActiveKey:"/home",className:"flex-column"},r.a.createElement(T.a,{className:"my-4",vertical:!0},r.a.createElement(k.b,{className:"btn btn-secondary",to:"/"},"Everything (",n,")"),Object.values(t.categories).map((function(e){return r.a.createElement(k.b,{className:"btn btn-secondary",to:"/category/"+e.title,key:e.id},e.title," (",a[e.id],") ")})))))};function P(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Recent:"))}function I(){return r.a.createElement("footer",{align:"center"},"\xa9 2020 Northwest Labs")}function H(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Thank you, your order has been received!"))}function z(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h2",null,"Hello"),r.a.createElement("h3",null,"How are you?")))}var A=a(131);function B(e){var t=e.product.description.substring(0,50),a=parseInt(e.product.price).toFixed(2);return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{bg:"light",style:{width:"18rem"}},r.a.createElement(A.a.Img,{variant:"top",src:"/media/images/".concat(e.product.filename,"-1.png")}),r.a.createElement(A.a.Body,null,r.a.createElement(A.a.Title,null,e.product.name),r.a.createElement(A.a.Text,null,"Price: $",a),r.a.createElement(A.a.Text,null,t+"..."),r.a.createElement(k.b,{to:"/product/".concat(e.product.id),className:"btn btn-primary abs",variant:"primary"},"Details"))))}var M=a(18);function L(e){var t=Object(n.useContext)(y),a=Object.values(t.products),l=Object(M.g)("/category/:id");l&&(a=a.filter((function(e){return e.category.title===l.params.id})));var c=a.map((function(e){return r.a.createElement(C.a,{key:e.name.toString(),md:"3",className:"my-3"},r.a.createElement(B,{product:e}))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{fluid:!0},r.a.createElement(x.a,{md:"3"},c)))}function _(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Help"),r.a.createElement("h3",null,"How may I help you today?"))}function q(e){var t=Object(M.g)("/product/:id"),a=Object(n.useContext)(y),l=Object.values(a.products),c=Object(n.useState)("-1"),m=Object(d.a)(c,2),o=m[0],s=m[1],i=l[t.params.id-1];if(null==i)return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,'Product "',t.url,'" Not Found'));var u=parseInt(i.price).toFixed(2);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"float-rt"},r.a.createElement("img",{width:"300px",height:"300px",alt:"",src:"/media/images/".concat(i.filename).concat(o,".png")}),r.a.createElement("div",{align:"center"},r.a.createElement("img",{onMouseEnter:function(){return s("-1")},className:"thumbnail",alt:"",src:"/media/images/".concat(i.filename,"-1.png")}),r.a.createElement("img",{onMouseEnter:function(){return s("-2")},className:"thumbnail",alt:"",src:"/media/images/".concat(i.filename,"-2.png")}),r.a.createElement("img",{onMouseEnter:function(){return s("-3")},className:"thumbnail",alt:"",src:"/media/images/".concat(i.filename,"-3.png")}),r.a.createElement("img",{onMouseEnter:function(){return s("-4")},className:"thumbnail",alt:"",src:"/media/images/".concat(i.filename,"-4.png")}))),r.a.createElement("div",null,r.a.createElement("h1",null,i.name),r.a.createElement("h2",null,"$",u),r.a.createElement("h4",null,i.description)),r.a.createElement("br",null),r.a.createElement(k.b,{to:"/cart",onClick:function(){a.addToCart(i.id)},className:"btn btn-warning"},"Add to Cart"),r.a.createElement("br",null),r.a.createElement("br",null))}var D=a(125),$=a(77);function G(e){return parseFloat(e).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}var J=function(e){return r.a.createElement(N.a,{fluid:!0},r.a.createElement(x.a,null,r.a.createElement(C.a,null,r.a.createElement("h1",{className:"mt-3"},"Shopping Cart"))),r.a.createElement(x.a,null,r.a.createElement(C.a,null,r.a.createElement(K,null))),r.a.createElement(x.a,null,r.a.createElement(C.a,{className:"text-center"},r.a.createElement(k.b,{to:"/checkout",className:"btn btn-success",role:"button"},"Checkout"))))};function K(e){for(var t=r.a.useContext(y),a=[],n=0,l=0,c=Object.entries(t.cart);l<c.length;l++){var m=Object(d.a)(c[l],2),o=m[0],s=m[1],i=t.products[o];i&&(n+=s*i.price,a.push({product:i,qty:s,extended:s*i.price}))}return r.a.createElement(D.a,{borderless:!0,className:"mt-4"},r.a.createElement("tbody",null,r.a.createElement("tr",{className:"border-bottom"},r.a.createElement("th",{className:"text-center"},"Product"),r.a.createElement("th",{className:"text-center"},"Quantity"),r.a.createElement("th",{className:"text-center"},"Price"),r.a.createElement("th",{className:"text-center"},"Extended"),r.a.createElement("th",null)),a.map((function(e){return r.a.createElement("tr",{key:e.product.id},r.a.createElement("td",null,r.a.createElement("img",{alt:e.product.name,src:"/media/images/".concat(e.product.filename,"-1.png"),className:"border rounded mr-3",style:{height:"60px",width:"60px"}}),e.product.name),r.a.createElement("td",{className:"text-right"},e.qty),r.a.createElement("td",{className:"text-right"},G(e.product.price)),r.a.createElement("td",{className:"text-right"},G(e.extended)),r.a.createElement("td",{className:"text-center"},r.a.createElement($.a,{variant:"outline-secondary",size:"sm",onClick:function(a){t.removeFromCart(e.product.id)}},"Remove")))})),r.a.createElement("tr",{className:"border-top"},r.a.createElement("th",{className:"text-center"},"Total"),r.a.createElement("th",null),r.a.createElement("th",null),r.a.createElement("th",{className:"text-right"},G(n)),r.a.createElement("th",null))))}var W=a(126),R=a(128),Y=a(47),Q=a(29),U=a(81),V=Object(U.a)("pk_test_iCL91JIyb5YKwhitxEyOfKzc00TXiGqpdE");var X=function(e){return r.a.createElement(Q.Elements,{stripe:V},r.a.createElement(Z,null))},Z=function(e){var t=r.a.useContext(y),a=Object(M.f)(),n=Object(Q.useStripe)(),l=Object(Q.useElements)(),c=t.getCartTotal(),m=r.a.useState(null),s=Object(d.a)(m,2),u=s[0],E=s[1];return r.a.createElement(Y.c,{initialValues:{name:"Conrad Fox",address1:"1234",address2:"5678",city:"Provo",state:"UT",zipcode:"84602"},validateOnChange:!1,validateOnBlur:!1,validate:function(e){return e.name,console.log("validating",e),{}},onSubmit:function(){var e=Object(i.a)(o.a.mark((function e(r,m){var s,i,u,p,b,h,g,v,y;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(console.log("submit",r),E(null),s=[],i=0,u=Object.entries(t.cart);i<u.length;i++)p=Object(d.a)(u[i],2),b=p[0],h=p[1],(g=t.products[b])&&s.push({pid:b,qty:h,price:g.price});return e.next=6,f.a.post("http://localhost:8000/api/sale/",{name:r.name,address1:r.address1,address2:r.address2,city:r.city,state:r.state,zipcode:r.zipcode,total:c,items:s});case 6:return v=e.sent,console.log(v.data),e.next=10,n.confirmCardPayment(v.data.client_secret,{payment_method:{card:l.getElement(Q.CardElement),billing_details:{name:r.name}}});case 10:if(y=e.sent,console.log(y),m.setSubmitting(!1),!y.error){e.next=16;break}return E(y.error.message),e.abrupt("return");case 16:t.clearCart(),a.push("/receipt");case 18:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){return r.a.createElement(r.a.Fragment,null,u&&r.a.createElement("div",{className:"mb-3 text-center text-danger"},u),r.a.createElement(ee,{form:e,total:c}))}))},ee=function(e){return r.a.createElement(Y.b,null,r.a.createElement(N.a,{fluid:!0},r.a.createElement(x.a,null,r.a.createElement(C.a,null,r.a.createElement("h1",{className:"mt-3"},"Checkout"))),r.a.createElement(x.a,{className:"my-3"},r.a.createElement(C.a,{md:"6"},r.a.createElement(A.a,null,r.a.createElement(A.a.Header,null,r.a.createElement(A.a.Title,null,"Shipping")),r.a.createElement(A.a.Body,null,r.a.createElement(te,{title:"Name:",name:"name",type:"text"}),r.a.createElement(te,{title:"Address1:",name:"address1",type:"text"}),r.a.createElement(te,{title:"Address2:",name:"address2",type:"text"}),r.a.createElement(te,{title:"City:",name:"city",type:"text"}),r.a.createElement(te,{title:"State:",name:"state",type:"text"}),r.a.createElement(te,{title:"Zip:",name:"zipcode",type:"text"})))),r.a.createElement(C.a,{md:"6"},r.a.createElement(A.a,null,r.a.createElement(A.a.Header,null,r.a.createElement(A.a.Title,null,"Payment")),r.a.createElement(A.a.Body,null,r.a.createElement(Q.CardElement,null))),r.a.createElement("div",{className:"mt-4"},"Your card will be charged ",r.a.createElement("b",null,G(e.total)),"."),r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement($.a,{variant:"success",type:"submit",className:"d-inline-flex align-items-center",disabled:e.form.isSubmitting},e.form.isSubmitting&&r.a.createElement(W.a,{className:"mr-2",size:"sm",animation:"border"}),"Purchase"))))))},te=function(e){return r.a.createElement(Y.a,{name:e.name},(function(t){return r.a.createElement(R.a.Group,null,e.title&&r.a.createElement(R.a.Label,null,e.title),r.a.createElement(R.a.Control,Object.assign({type:"text",disabled:t.form.isSubmitting,placeholder:e.placeholder},t.field)),t.meta.touched&&t.meta.error&&r.a.createElement("div",{className:"text-danger"},t.meta.error))}))};var ae=function(e){return r.a.createElement(k.a,null,r.a.createElement(N.a,{fluid:!0},r.a.createElement(x.a,null,r.a.createElement(C.a,{className:"top-bg"},r.a.createElement(F,null))),r.a.createElement(x.a,null,r.a.createElement(C.a,{className:"left-bg"},r.a.createElement(S,null)),r.a.createElement(C.a,{xs:8,className:"center-bg"},r.a.createElement(M.c,null,r.a.createElement(M.a,{path:"/about",component:z}),r.a.createElement(M.a,{path:"/help",component:_}),r.a.createElement(M.a,{path:"/product",component:q}),r.a.createElement(M.a,{path:"/cart",component:J}),r.a.createElement(M.a,{path:"/checkout",component:X}),r.a.createElement(M.a,{path:"/receipt",component:H}),r.a.createElement(M.a,{path:"/",component:L}))),r.a.createElement(C.a,{className:"right-bg"},r.a.createElement(P,null))),r.a.createElement(x.a,{className:"bottom-bg"},r.a.createElement(C.a,null,r.a.createElement(I,null)))))},ne=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).addToCart=function(e){n.setState(Object(v.a)(n.state,(function(t){t.cart[e]=(t.cart[e]||0)+1;for(var a=0,n=0,r=Object.values(t.cart);n<r.length;n++){a+=r[n]}t.cartCount=a})))},n.removeFromCart=function(e){n.setState(Object(v.a)(n.state,(function(t){delete t.cart[e];for(var a=0,n=0,r=Object.values(t.cart);n<r.length;n++){a+=r[n]}t.cartCount=a})))},n.clearCart=function(){n.setState(Object(v.a)(n.state,(function(e){e.cart={},e.cartCount=0})))},n.getCartTotal=function(){for(var e=0,t=0,a=Object.entries(n.state.cart);t<a.length;t++){var r=Object(d.a)(a[t],2),l=r[0],c=r[1],m=n.state.products[l];m&&(e+=c*m.price)}return e},n.actions={addToCart:n.addToCart,removeFromCart:n.removeFromCart,clearCart:n.clearCart,getCartTotal:n.getCartTotal},n.state={categories:{},products:{},cart:{},cartCount:0},n}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(y.Provider,{value:Object(u.a)({},this.state,{},this.actions)},r.a.createElement(ae,null))}},{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t,a,n,r,l,c,m,i,u,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("http://localhost:8000/api/category");case 2:t=e.sent,a={},n=Object(s.a)(t.data);try{for(n.s();!(r=n.n()).done;)l=r.value,a[l.id]=l}catch(o){n.e(o)}finally{n.f()}return e.next=8,f.a.get("http://localhost:8000/api/product");case 8:c=e.sent,m={},i=Object(s.a)(c.data);try{for(i.s();!(u=i.n()).done;)d=u.value,m[d.id]=d}catch(o){i.e(o)}finally{i.f()}this.setState({categories:a,products:m});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},16:function(e,t,a){},85:function(e,t,a){e.exports=a(120)},92:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.116b5b1d.chunk.js.map